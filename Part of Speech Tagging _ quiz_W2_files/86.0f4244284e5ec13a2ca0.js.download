(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{"+uTL":function(module,e,t){"use strict";t.d(e,"a",function(){return o}),t.d(e,"b",function(){return s}),t.d(e,"c",function(){return i});var r=t("HRhj"),n=t("sQ/U"),o=function getForumSubscription(e,t){return r.a.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t})},s=function subscribeUserToEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.subscribe(e,t)},i=function unsubscribeUserFromEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.unsubscribe(e,t)}},"3As7":function(module,e,t){"use strict";t.r(e);var r=t("VkAN"),n=t.n(r),o=t("VbXa"),s=t.n(o),i=t("AeFk"),a=t("q1tI"),c=t.n(a),u=t("17x9"),l=t.n(u),d=t("F/us"),p=t.n(d),m=t("+LJP"),b=t("W1i5"),f=t("BVC1"),h=t("8Hdl"),S=t("jrIE"),g=t("7GkZ"),v=t("6fvP"),y=t("5+aF"),O=t("cD+G"),j=t("zwd1"),I=t("Od0f"),x=t("jLko"),w=t("olxp"),T=t("ypD2"),F=t("fg2g"),P=t("2BcA"),C=t("GqWO"),D=t("HbX8"),E=t("ii1C"),N=t("zfwB"),A=t("GP6s"),k=t.n(A),q=t("B0lp"),B=t.n(q);function _templateObject(){var e=n()(["\n                    margin-bottom: 12px;\n                    line-height: 36px;\n                  "]);return _templateObject=function _templateObject(){return e},e}var U=function(e){function ThreadsView(t){var r;return(r=e.call(this,t)||this).renderBreadCrumbs=function(){var e,t=r.props.currentForum,n,o=!!r.context.router.params.question_id;t.parentForumId&&r.props.listedForums.forEach(function(e){(null==t?void 0:t.parentForumId)&&e&&e.id&&t.parentForumId===e.id&&(n=e)});var s=[{label:k()("Discussion Forums"),href:Object(C.h)()}],a=n?{label:n.title,href:f.a.join(Object(C.j)(r.props.courseSlug),n.link)}:void 0,c;return a&&s.push(a),!!(null===(e=r.context.router.location.query)||void 0===e?void 0:e.q)?((s=[]).push({label:k()("Course Overview"),href:Object(C.i)(r.props.courseSlug)}),s.push({label:k()("Forums"),href:Object(C.h)()}),s.push({label:k()("Search results")})):o?s.push({label:t.title,href:f.a.join(Object(C.j)(r.props.courseSlug),t.link)}):s.push({label:t.title}),Object(i.d)(N.a,{separator:Object(i.d)(S.a,{size:16,color:"#1F1F1F"}),className:"breadcrumbs",links:s})},r.resourcePanelEnabled=v.b.enabledResourcePanelToPublic(),r}s()(ThreadsView,e);var t=ThreadsView.prototype;return t.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===P.j.itemForumType)return null;return Object(i.d)("div",{className:"flex-1"},Object(i.d)(j.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},t.render=function render(){var e,t=this.props.currentForum;if(!t)return Object(i.d)("div",{className:"forum-name headline-5-text color-primary-text"},k()("Oops! Looks like this thread isn't viewable or does not exist."));var r=t.title,n=t.description,o=t.id,s=!!this.context.router.params.question_id,a=!!(null===(e=this.context.router.location.query)||void 0===e?void 0:e.q);return Object(i.d)("div",{className:"rc-ForumsV2ThreadsView"},Object(i.d)("div",{className:"horizontal-box vertical-when-tablet"},Object(i.d)("div",{className:"flex-2 threads-view-header"},this.renderBreadCrumbs(),Object(i.d)("div",null,!s&&!a&&Object(i.d)(h.a,{variant:"h1semibold",css:Object(i.c)(_templateObject())},r),!s&&!a&&Object(i.d)("div",{className:"forum-description horizontal-box"},Object(i.d)(g.a,{cml:n,isCdsEnabled:!0}),Object(i.d)("div",null,this.renderSubscriptionButton())))),Object(i.d)("div",{className:"flex-1 align-self-end session-switcher-container"},Object(i.d)(F.a,null))),Object(i.d)("div",{className:"horizontal-box align-items-top vertical-when-tablet"},Object(i.d)(I.a,{className:"flex-2 discussions-body-column",key:o})))},ThreadsView}(c.a.Component);U.contextTypes={router:l.a.object.isRequired},e.default=Object(d.compose)(Object(y.a)({fields:["title","description","link"],subcomponents:[O.a,w.a,x.a,T.a]}),Object(m.a)(E.a),Object(b.a)(D.a))(U)},"8VQ/":function(module,exports,e){},AgXR:function(module,e,t){"use strict";t.d(e,"c",function(){return i}),t.d(e,"a",function(){return a}),t.d(e,"b",function(){return c});var r=t("lSNA"),n=t.n(r),o=t("+uTL"),s=t("sQ/U");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var i=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(s.a.isAuthenticatedUser())return o.a(r,n).then(function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},a=function addSubscription(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(s.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),o.b(r,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},c=function deleteSubscription(e,t){var r=t.subscription,n=t.forumSubscriptionId,i=t.forumType;if(s.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",_objectSpread(_objectSpread({},r),{},{isInProgress:!0})),o.c(n,i).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:n,isSubscribed:!1})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))}},B0lp:function(module,exports,e){var t=e("zOnE"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},CxSU:function(module,exports,e){var t=e("8VQ/"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},HRhj:function(module,e,t){"use strict";var r=t("S+eF"),n=t.n(r),o=t("TSOT"),s=t("2BcA"),i=Object(o.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),a=Object(o.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),c=Object(o.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),u=function getSubscription(e,t){return t===s.j.mentorForumType?n()(a.get(e)):t===s.j.groupForumType?n()(c.get(e)):n()(i.get(e))},l=function subscribe(e,t){return t===s.j.mentorForumType?n()(a.put(e)):t===s.j.groupForumType?n()(c.put(e)):n()(i.put(e))},d=function unsubscribe(e,t){return t===s.j.mentorForumType?n()(a.delete(e)):t===s.j.groupForumType?n()(c.delete(e)):n()(i.delete(e))};e.a={getSubscription:u,subscribe:l,unsubscribe:d}},HbX8:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),o=t("2BcA");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.a=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),r=t.find(function(e){return e.forumType.typeName===o.j.rootForumType}),n=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==r.id&&(n=t.find(function(t){return t.id===e.currentForum.parentForumId}));var s=t.filter(function(e){return e.parentForumId===n.id});return s.unshift(n),_objectSpread(_objectSpread({},e),{},{listedForums:s,parentForumId:n.id})}},Od0f:function(module,e,t){"use strict";t.d(e,"a",function(){return M});var r=t("pVnL"),n=t.n(r),o=t("PJYZ"),s=t.n(o),i=t("VbXa"),a=t.n(i),c=t("lSNA"),u=t.n(c),l=t("AeFk"),d=t("q1tI"),p=t.n(d),m=t("w/1P"),b=t.n(m),f=t("17x9"),h=t.n(f),S=t("F/us"),g=t.n(S),v=t("ngyh"),y=t("8cuT"),O=t("+LJP"),j=t("L1vm"),I=t("763+"),x=t("6/Gu"),w=t("8Hdl"),T=t("HulD"),F=t("KJtU"),P=t("8/1n"),C=t("9UIe"),D=t("olxp"),E=t("2BcA"),N=t("GP6s"),A=t.n(N),k=t("NoGk"),q=t("yb7V"),B=t("NcZ8");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){u()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SearchBarCoreLayout(e){var t,r=e.children,n=Object(I.a)(),o=Object(l.c)({".searchBoxContainer":{justifyContent:"flex-start"},".newThreadButtonContainer":(t={justifyContent:"flex-start",alignItems:"center","& .orStatement":{padding:n.spacing(0,24)}},u()(t,"".concat(n.breakpoints.up("sm")),{padding:n.spacing(0)}),u()(t,"".concat(n.breakpoints.down("xs")),{padding:n.spacing(24,0,0,0),"& .orStatement":{padding:n.spacing(0,24,0,0)}}),t)});return Object(l.d)(x.a,{container:!0,css:o},Object(l.d)(x.a,{container:!0,item:!0,style:{display:"flex",justifyContent:"space-between"}},Object(l.d)(x.a,{item:!0,xs:12,sm:9,className:"searchBoxContainer"},Object(l.d)(B.b,{previousElementId:"sortOrder",nextElementId:"new-thread-btn",animateFromSearch:function animateFromSearch(){return null},animateToSearch:function animateToSearch(){return null}})),Object(l.d)(x.a,{item:!0,xs:12,sm:3,className:"newThreadButtonContainer"},Object(l.d)(x.a,{container:!0,item:!0,css:{flexFlow:"row"}},Object(l.d)(x.a,{item:!0,css:{alignItems:"center",display:"flex"}},Object(l.d)(w.a,{color:"supportText",variant:"body2",component:"span",className:"orStatement"},A()("or"))),Object(l.d)(x.a,{item:!0},Object(l.d)(q.b,null))))),Object(l.d)(x.a,{container:!0,item:!0,style:{maxWidth:"650px",padding:n.spacing(32,0,0,0)}},r))}var U=function(e){a()(DiscussionsBody,e);var t=DiscussionsBody.prototype;function DiscussionsBody(t,r){var n;return(n=e.call(this,t,r)||this).handleDismissSuccessAlert=n.handleDismissSuccessAlert.bind(s()(n)),!t.isSessionsFilterStoreSetup&&t.hasModerationRole&&r.executeAction(F.a,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),t.isSessionsFilterStoreSetup||t.hasModerationRole||r.executeAction(F.b,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),n}return t.getChildContext=function getChildContext(){return{fluxibleContext:this.context.fluxibleContext||this.props.fluxibleContext}},t.handleDismissSuccessAlert=function handleDismissSuccessAlert(){var e=this.props.router,t,r=_objectSpread({},e.location.query);null==r||delete r.newThread,e.replace(_objectSpread(_objectSpread({},e.location),{},{query:r}))},t.renderSearchResults=function renderSearchResults(){var e=this.props,t=e.searchPage,r=e.q;return Object(l.d)(SearchBarCoreLayout,null,Object(l.d)(C.a,{query:r,page:t,currentForumUrl:this.context.currentForumUrl,currentForum:this.context.currentForum,pathname:this.context.pathName}))},t.renderThreadsList=function renderThreadsList(){var e=this,t=this.props,r=t.hasModerationRole,n=t.listPage,o=t.listSort,s=t.listAnswered;return Object(l.d)(SearchBarCoreLayout,null,Object(l.d)(D.a,{ref:function ref(t){e.threadsList=t},hasModerationRole:r,sort:o,answered:s,page:n}))},t.renderThreadDetail=function renderThreadDetail(){var e,t=this.props,r=t.questionId,n=t.answerId,o=t.commentId,s=t.detailPage,i=t.detailSort,a=t.courseId,c,u=!!(null===(e=t.router.location.query)||void 0===e?void 0:e.newThread);return Object(l.d)(x.a,{container:!0},u&&Object(l.d)(x.a,{item:!0,xs:12},Object(l.d)(T.a,{role:"alert",severity:"success",onDismiss:this.handleDismissSuccessAlert},A()("Your post has been created."))),Object(l.d)(x.a,{item:!0,xs:12},Object(l.d)(k.a,{answerId:n,commentId:o,questionId:r,courseId:a,forumQuestionId:r,sort:i,page:s})))},t.render=function render(){var e=this.props.q,t=this.props,r=t.role,o=t.questionId;return Object(l.d)("div",n()({className:b()("rc-ForumsV2DiscussionsBody","styleguide",this.props.className),id:"discussions-tabpanel","aria-label":A()("Discussions")},r?{role:r}:{}),o&&this.renderThreadDetail(),!o&&(e?this.renderSearchResults():this.renderThreadsList()))},DiscussionsBody}(p.a.Component);function booleanOrUndefinedFromString(e){if(/true/i.test(e))return!0;if(/false/i.test(e))return!1;return}U.contextTypes={router:h.a.object.isRequired,fluxibleContext:h.a.object,executeAction:h.a.func.isRequired},U.childContextTypes={fluxibleContext:h.a.object},U.defaultProps={detailSort:E.f.detailSort,detailPage:E.f.detailPage,listSort:E.f.listSort,listAnswered:E.f.listAnswered,listPage:E.f.listPage};var R=function getPropsFromRouter(e,t){var r=e.params,n=e.location.query,o=r.question_id||t.questionId,s=n.page?parseInt(n.page,10):1,i={answerId:r.answer_id||t.answerId,questionId:o,commentId:r.comment_id||t.commentId,sort:n.sort,answered:booleanOrUndefinedFromString(n.answered),page:s};return o?Object.assign(i,{detailSort:n.sort,detailAnswered:n.answered,detailPage:s}):n.q?Object.assign(i,{q:n.q,searchPage:s}):Object.assign(i,{listSort:n.sort,listAnswered:n.answered,listPage:s}),i},L=Object(S.compose)(Object(y.a)(["SessionFilterStore","SessionStore","CourseStore","CourseMembershipStore","ApplicationStore"],function(e){var t=e.SessionFilterStore,r=e.SessionStore,n=e.CourseStore,o=e.CourseMembershipStore,s=e.ApplicationStore;return{hasModerationRole:o.hasModerationRole()||s.isSuperuser(),isSessionsFilterStoreSetup:t.filtersLoaded,currentSessionId:r.isEnrolled()?r.getSessionId():void 0,courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),isPrivateSession:!!r.isEnrolled()&&r.isSessionPrivate()}}),Object(O.a)(R),Object(O.a)(function(e){return{router:e}}),j.a.createTrackedContainer(function(e){return{sort:e.sort,answered:e.answered,page:e.page}}))(U),M=function(e){function FluxibleConnectedDiscussionsBody(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).fluxibleContext=void 0,t}a()(FluxibleConnectedDiscussionsBody,e);var t=FluxibleConnectedDiscussionsBody.prototype;return t.componentWillMount=function componentWillMount(){var e=this.context.fluxibleContext;this.fluxibleContext=Object(P.a)(e)},t.render=function render(){var e;return Object(l.d)(v.a,{context:null===(e=this.fluxibleContext)||void 0===e?void 0:e.getComponentContext()},Object(l.d)(L,this.props))},FluxibleConnectedDiscussionsBody}(p.a.Component);M.contextTypes={fluxibleContext:h.a.object}},RYD2:function(module,e,t){"use strict";var r=t("pVnL"),n=t.n(r),o=t("VbXa"),s=t.n(o),i=t("w/1P"),a=t.n(i),c=t("CsdX"),u=t("q1tI"),l=t.n(u),d=t("eJMc"),p=t.n(d),m=t("F/us"),b=t.n(m),f=t("cIEV"),h=t.n(f),S=function emptyFunction(){},g=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}s()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(m.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,o=e.separator,s=e.separatorStyles,i=this.getFilteredLinks();return l.a.createElement("ol",{className:a()("rc-Breadcrumbs inline",t)},i.map(function(e,t){var a=[l.a.createElement("li",null,e.href?l.a.createElement(p.a,{className:r,to:e.href,onClick:e.onClick||S},e.label):l.a.createElement("span",{className:r},e.label))];return t!==i.length-1&&a.push(l.a.createElement("li",n()({},Object(c.d)("divider",s),{"aria-hidden":!0}),o||"/")),a}))},Breadcrumbs}(l.a.Component);e.a=g},"X+do":function(module,exports,e){},Xvvx:function(module,exports,e){},"cD+G":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("17x9"),s=t.n(o),i=t("q1tI"),a=t.n(i),c=t("F/us"),u=t.n(c),l=t("w/1P"),d=t.n(l),p=t("eJMc"),m=t.n(p),b=t("BVC1"),f=t("BZ+2"),h=t("zFZo"),S=t("weTL"),g=t("+LJP"),v=t("ii1C"),y=t("W1i5"),O=t("GqWO"),j=t("HbX8"),I=t("5+aF"),x=t("6fvP"),w=t("GP6s"),T=t.n(w),F=t("vJ/u"),P=t.n(F),C=function(e){function SubforumSidebar(t){var r;return(r=e.call(this,t)||this).resourcePanelEpic=x.b.enabledResourcePanelToPublic(),r}var t;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this,t=this.props,r=t.listedForums,n=t.currentForumId,o=t.parentForumId,s=t.courseSlug;if(!r||r.length<=1)return null;return a.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},a.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},T()("Subforums")),a.a.createElement("ul",{className:"nostyle"},r.map(function(t){var r=d()("forum-title",{"body-2-text":t.id===n,"body-1-text":t.id!==n}),i=b.a.join(Object(O.j)(s),t.link),c=Object(O.m)(t.forumId);return i=e.resourcePanelEpic&&c||i,a.a.createElement("li",{className:"subforum-entry"},a.a.createElement(m.a,{key:t.id,to:i,className:"nostyle","aria-current":t.id===n},t.id===n&&a.a.createElement("div",{className:"current-forum-indicator"}),a.a.createElement("div",{className:r},t.id===o?T()("All"):t.title)))})))},SubforumSidebar}(a.a.Component);C.propTypes={courseSlug:s.a.string,listedForums:s.a.arrayOf(s.a.oneOfType([s.a.instanceOf(f.a),s.a.instanceOf(h.a),s.a.instanceOf(S.a)])),currentForumId:s.a.string,parentForumId:s.a.string},e.a=u.a.compose(Object(I.a)({fields:["link","title","description","parentForumId"]}),Object(g.a)(v.a),Object(y.a)(j.a))(C)},cIEV:function(module,exports,e){var t=e("X+do"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},hSS9:function(module,exports,e){var t=e("Xvvx"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},jLko:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),o=t("VbXa"),s=t.n(o),i=t("kvW3"),a=t("oEt1"),c=t("eJMc"),u=t.n(c),l=t("17x9"),d=t.n(l),p=t("q1tI"),m=t.n(p),b=t("F/us"),f=t.n(b),h=t("JacN"),S=t("as3Y"),g=t("QXTe"),v=t("py0D"),y=t("u6zc"),O=t("T/K2"),j=t("abvH"),I=t("NMx/"),x=t("dJDe"),w=t("kRCD"),T=t("sWYI"),F=t("2BcA"),P=t("GqWO"),C=t("2xl4"),D=t("WE4C"),E=t("6JtA"),N=t("Nxpp"),A=t("8cuT"),k=t("+LJP"),q=t("ii1C"),B=t("5+aF"),U=t("e8+g"),R=t("GP6s"),L=t.n(R),M=t("PDuk"),V=t("CxSU"),z=t.n(V);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var W=F.d.limitPerPage,X=function(e){function ThreadDetail(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={canTeach:!1,inputClickCounter:0},t._isMounted=!1,t.fetchAnswerPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.props,n=r.answerId,o=r.questionId,s=r.courseId,i=r.courseSlug,a=r.userId,c=r.contextId,u=r.currentForum,l=r.currentForumUrl,d=r.sort,p=r.page,m=e||n;if(!m)return;var b=Object(M.c)([s,m]);Object(C.b)(b,d,W).then(function(e){e===p?t.context.executeAction(h.b,{questionId:o,courseId:s,courseSlug:i,userId:a,contextId:c,sort:d,page:p,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole}):t.context.router.replace({pathname:t.context.router.location.pathname,params:{},query:_objectSpread(_objectSpread({},t.context.router.location.query),{page:e})})}).fail(function(){var e=l;t.context.router.replace(Object(P.a)(e,o)),t.context.executeAction(h.b,{userId:a,courseId:s,courseSlug:i,contextId:c,questionId:o,sort:F.f.detailSort,page:F.f.detailPage,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole})}).done()},t}s()(ThreadDetail,e);var t=ThreadDetail.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.questionId,r=e.sort,n=e.page,o=e.answerId,s=e.userId,i=e.courseId,a=e.courseSlug,c=e.contextId,u=e.currentForum;this.context.executeAction(h.d,{questionId:t,userId:s,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName}),o||1===n&&r===F.f.detailSort||this.context.executeAction(h.b,{questionId:t,userId:s,courseId:i,courseSlug:a,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName,includeDeleted:this.props.hasModerationRole})},t.componentDidMount=function componentDidMount(){this.getRole(),this.fetchAnswerPosition(),this._isMounted=!0},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.questionId,r=e.userId,n=e.courseId,o=e.courseSlug,s=e.contextId,i=e.sort,a=e.page,c=e.currentForum;e.sort!==this.props.sort||e.page!==this.props.page?this.context.executeAction(h.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:s,sort:i,page:a,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}):this.props.answerSavingState===F.m.SAVING&&e.answerSavingState===F.m.SAVED&&(this.context.executeAction(h.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:s,sort:i,page:a,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}),this.context.router.push({pathname:window.location.pathname,params:{},query:{sort:F.c.newestSort}}))},t.componentDidUpdate=function componentDidUpdate(e,t,r){(e.questionId!==this.props.questionId||e.currentForum&&e.currentForum.id!==this.props.currentForum.id)&&this.markRead()},t.componentWillUnmount=function componentWillUnmount(){this._isMounted=!1},t.getRole=function getRole(){var e=this,t=this.props,r=t.authenticated,n=t.isSuperuser,o=t.currentForum,s=o&&o.forumType.definition.groupId;s?Object(N.a)(s,r,n).then(function(t){e._isMounted&&e.setState({canTeach:t})}):this.setState({canTeach:this.props.hasModerationRole})},t.getBackLinkDescription=function getBackLinkDescription(){return this.props.currentForum.title},t.markRead=function markRead(){D.a.markRead(this.props.questionId)},t.render=function render(){var e=this,t=this.props,r=t.question,n=t.isClosed,o=t.isPinned,s=t.currentForumUrl,c=t.currentForum,l=t.sort,d=t.page,p=t.questionId,b=t.answerId,f=t.latestNewThreadId,h=t.commentId,x=t.courseId,w=s,P=c&&c.forumType.typeName,C=F.j.mentorForumType,D=F.j.groupForumType,N=c&&[C,D].indexOf(P)<0,A=N,k=this.state.canTeach&&r&&N,q=r?Object(a.c)(r):"undefined-thread-legend",B=this.state.inputClickCounter,R=Object(E.a)();return m.a.createElement("div",{className:"rc-ThreadDetail"},r&&m.a.createElement("h2",{id:q,className:"screenreader-only"},m.a.createElement(i.b,{message:L()("Thread: {title}"),title:r.content.question})),k&&m.a.createElement(g.a,{isPinned:o,question:r}),f===p&&m.a.createElement("div",{className:"sr-only","aria-live":"polite"},m.a.createElement(i.b,{message:L()("Your new thread was created")})),m.a.createElement("div",{className:"discussion-content"},m.a.createElement("div",{className:"horizontal-box align-items-vertical-center align-items-spacebetween"},m.a.createElement(u.a,{to:this.props.backLink,className:"back-area nostyle"},m.a.createElement("div",{className:"horizontal-box align-items-vertical-center"},m.a.createElement("i",{className:"back-arrow cif-arrow-left c-back-arrow-image"}),m.a.createElement("h1",{className:"headline-2-text c-back-label"},this.getBackLinkDescription()))),this.state.canTeach&&r&&m.a.createElement(T.a,{question:r,shouldShowMoveThread:A})),m.a.createElement("div",{className:"frost-container"},m.a.createElement("div",null,m.a.createElement(S.a,{goToInput:function goToInput(){return e.setState({inputClickCounter:B+1})},question:r,isPinned:o,forumLink:w}),n&&m.a.createElement("div",{className:"c-thread-locked card-no-action color-secondary-text"},m.a.createElement("div",{className:"horizontal-box align-items-absolute-center"},m.a.createElement("i",{className:"cif-lock"}),L()("This thread is closed. You cannot add any more responses.")))),m.a.createElement("div",null,Object(U.a)(x,P)&&m.a.createElement(O.a,{answerId:b,commentId:h,forumLink:w,questionId:p,fetchAnswerPosition:this.fetchAnswerPosition}),r&&m.a.createElement(j.a,{page:d,sort:l,answerId:b,commentId:h,forumLink:w,questionId:p,fetchAnswerPosition:this.fetchAnswerPosition}),!n&&m.a.createElement("div",{className:"reply-container horizontal-box"},m.a.createElement(y.a,{fullName:R.get("fullName"),externalUserId:R.get("externalUserId"),profileImageUrl:R.getProfileImageUrl()}),r&&m.a.createElement(I.a,{question:r,parentPost:r,savingState:this.props.answerSavingState,shouldFocusCounter:this.state.inputClickCounter,ariaLabel:L()("Reply to this thread"),ariaDescribedBy:q})),r&&r.state&&r.state.deleted&&m.a.createElement(v.a,{entry:r,hideUndoDelete:!1})))))},ThreadDetail}(m.a.Component);X.contextTypes={executeAction:d.a.func.isRequired,router:d.a.object.isRequired},e.a=f.a.compose(Object(A.a)(["ThreadDetailsStore","ThreadsStore","ThreadSettingsStore","CourseStore","ApplicationStore"],function(e,t){var r=e.ThreadDetailsStore,n=e.ThreadsStore,o=e.ThreadSettingsStore,s=e.CourseStore,i=e.ApplicationStore,a=t.questionId,c=r.getQuestion(a),u=n.threadToInsert&&n.threadToInsert.questionId;return{question:c,courseId:s.getCourseId(),courseSlug:s.getCourseSlug(),answerSavingState:c&&r.savingStates[c.id],isClosed:o.isClosed(),isPinned:o.isPinned(),latestNewThreadId:u,userId:i.getUserData().id,authenticated:i.isAuthenticatedUser(),isSuperuser:i.isSuperuser()}}),Object(B.a)({fields:["link","title"],subcomponents:[x.a,I.a,w.a]}),Object(k.a)(q.a))(X)},oRWh:function(module,e,t){"use strict";t.d(e,"a",function(){return j});var r=t("pVnL"),n=t.n(r),o=t("VbXa"),s=t.n(o),i=t("AeFk"),a=t("w/1P"),c=t.n(a),u=t("8Hdl"),l=t("fAYU"),d=t("VS/1"),p=t("CsdX"),m=t("q1tI"),b=t.n(m),f=t("eJMc"),h=t.n(f),S=t("F/us"),g=t.n(S),v=t("cIEV"),y=t.n(v),O=function emptyFunction(){},j=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}s()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(S.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,o=e.separator,s=e.separatorStyles,a=this.getFilteredLinks();return Object(i.d)("nav",{"aria-label":"Breadcrumbs"},Object(i.d)("ol",{className:c()("rc-Breadcrumbs inline",t)},a.map(function(e,t){var c=[Object(i.d)(u.a,{component:"li"},e.href?Object(i.d)(l.a,{variant:"quiet",component:h.a,className:r,to:e.href},e.label):Object(i.d)("span",n()({},t===a.length-1&&{"aria-current":"location"},{className:r}),e.label))];return t!==a.length-1&&c.push(Object(i.d)("li",n()({},Object(p.d)("divider",s),{"aria-hidden":!0}),o||Object(i.d)(d.a,{size:"small"}))),c})))},Breadcrumbs}(b.a.Component)},"vJ/u":function(module,exports,e){var t=e("wrRu"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},wrRu:function(module,exports,e){},zOnE:function(module,exports,e){},zfwB:function(module,e,t){"use strict";var r=t("RYD2"),n=t("oRWh");t.d(e,"a",function(){return n.a});var o=r.a},zwd1:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("AeFk"),s=t("F/us"),i=t.n(s),a=t("17x9"),c=t.n(a),u=t("q1tI"),l=t.n(u),d=t("sQ/U"),p=t("AgXR"),m=t("ZJgU"),b=t("8xbv"),f=t("q5zD"),h=t("8cuT"),S=t("GP6s"),g=t.n(S),v=t("hSS9"),y=t.n(v);function SubscribeButton(e){var t=e.onClick,r=e.className,n=e.isSubscriptionInProgress,s=e.isSubscribed,i=e.subscription,a=s?g()("Unsubscribe"):g()("Subscribe"),c,u=!n&&null===i?g()("Error"):a;if(n)return Object(o.d)(f.a,{name:"spinner",className:"cif-spin"});return Object(o.d)(m.a,{className:r,type:"button",size:"small",variant:"ghost",onClick:t,disabled:!i,icon:n&&Object(o.d)(b.a,{size:"small"}),iconPosition:n&&"after"},u)}var O=function(e){function ForumsV2SubscriptionButton(t,r){var n;return(n=e.call(this,t,r)||this).toggleSubscription=function(){var e=n.props,t=e.isSubscribed,r=e.forumType,o=e.subscription,s=e.forumSubscriptionId;t?(n.context.executeAction(p.b,{subscription:o,forumSubscriptionId:s,forumType:r}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:g()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(p.a,{forumType:r,forumSubscriptionId:s}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:g()("You will receive emails whenever new threads are added.")}))},n.state={subscriptionDetails:{},showSubscriptionDetails:!1},n}n()(ForumsV2SubscriptionButton,e);var t=ForumsV2SubscriptionButton.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,n=e.hasError,s=e.isSubscriptionInProgress,i=this.state,a=i.showSubscriptionDetails,c=i.subscriptionDetails;return Object(o.d)("div",{className:"rc-ForumsV2__SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},Object(o.d)(SubscribeButton,{className:"subscription-button",onClick:this.toggleSubscription,disabled:!t,isSubscriptionInProgress:s,subscription:t,isSubscribed:r}),!n&&a&&Object(o.d)("div",{className:"message caption-text"},c),n&&Object(o.d)("div",{className:"errorMessage"},g()("Sorry, something went wrong. Try again.")),a&&Object(o.d)("span",{className:"screenreader-only","aria-live":"polite"},t&&!s&&r?g()("Subscribed, You will receive emails whenever new threads are added."):g()("Unsubscribed, You will no longer receive emails whenever new threads are added.")))},ForumsV2SubscriptionButton}(l.a.Component);O.contextTypes={executeAction:c.a.func.isRequired},e.a=i.a.compose(Object(h.a)(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,t){var r=e.SubscriptionStore,n=null==t?void 0:t.forumId,o=n&&n.split("~"),s=n&&"".concat(d.a.get().id,"~").concat(o[0],"~").concat(o[1]),i=d.a.isAuthenticatedUser();return{forumSubscriptionId:s,hasError:r.hasError(),subscription:i&&!r.hasError()?r.getSubscription(s):null,isSubscribed:i&&!r.hasError()?r.getIsSubscribed(s):null,isSubscriptionInProgress:i&&!r.hasError()?r.getIsSubscriptionInProgress(s):null}}))(O)}}]);
//# sourceMappingURL=86.0f4244284e5ec13a2ca0.js.map